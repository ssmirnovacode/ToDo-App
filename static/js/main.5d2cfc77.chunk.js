(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(11),c=n.n(o),a=n(8),s=n(2),u=n(5),i=n(3),l=(n(19),n(0)),b=function(e){var t=e.value,n=e.onSearch;return Object(l.jsx)("input",{className:"form-control search-input",placeholder:"Search",onChange:function(e){return n(e.target.value)},value:t})},d=n(14),f=(n(21),function(e){var t=e.label,n=e.onDelete,r=e.onToggleDone,o=e.onToggleImportant,c=e.important,a="todo-list-item";e.done&&(a+=" done"),c&&(a+=" important");var s=c?"btn btn-outline-danger btn-sm float-right mr-2 active":"btn btn-outline-danger btn-sm float-right mr-2";return Object(l.jsxs)("span",{className:a,children:[Object(l.jsx)("span",{className:"todo-list-item-label",onClick:r,children:t}),Object(l.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm float-right",onClick:n,children:Object(l.jsx)("i",{className:"fa fa-trash-o"})}),Object(l.jsx)("button",{type:"button",className:s,onClick:o,children:Object(l.jsx)("i",{className:"fa fa-exclamation"})})]})}),j=(n(22),function(e){var t=e.items,n=e.onDelete,r=e.onToggleDone,o=e.onToggleImportant;return Object(l.jsx)("ul",{className:"list-group todo-list",children:t.map((function(e){var t=e.id,c=Object(d.a)(e,["id"]);return Object(l.jsx)("li",{className:"list-group-item",children:Object(l.jsx)(f,Object(s.a)(Object(s.a)({},c),{},{onDelete:function(){return n(t)},onToggleImportant:function(){return o(t)},onToggleDone:function(){return r(t)}}))},t)}))})}),m=(n(23),function(e){var t=e.toDo,n=e.done;return Object(l.jsxs)("div",{className:"app-header d-flex",children:[Object(l.jsx)("h1",{children:"ToDo List"}),Object(l.jsxs)("h2",{children:[n," done, ",t," pending"]})]})}),h=(n(24),function(e){return Object(l.jsx)("div",{className:"btn-group",children:[{name:"all",label:"All"},{name:"active",label:"Pending"},{name:"done",label:"Done"}].map((function(t){var n=e.filter===t.name?"btn btn-info":"btn btn-outline-secondary";return Object(l.jsx)("button",{type:"button",id:t.name,className:n,onClick:function(t){e.onSwitch(t.target.id)},children:t.label},t.name)}))})}),p=(n(25),function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(t){t.preventDefault(),e.onAdd(o),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(e){c(e.target.value)},placeholder:"What needs to be done?",value:o}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Add item"})]})}),O=(n(26),"http://localhost:3001/"),x=n(4),g=n.n(x),v=n(7),w=n(12),y=n(13),N=function(){function e(){Object(w.a)(this,e)}return Object(y.a)(e,[{key:"getItems",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var r,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,o=Object(s.a)(Object(s.a)({},n),{},{id:r}),e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(o)});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(c.status));case 7:return e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=(n(28),function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(t){t.preventDefault(),e.onLogin(o),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(e){c(e.target.value)},placeholder:"Enter your name",value:o}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Login"})]})}),S=function(){var e=localStorage.getItem("user")||"",t=new N,n=Object(r.useState)([]),o=Object(i.a)(n,2),c=o[0],d=o[1];Object(r.useEffect)((function(){localStorage.clear();var e=!0;return t.getItems(O+"items").then((function(t){e&&d(t)})).catch((function(){return console.log("GET error!")})),function(){return e=!1}}),[]);var f=Object(r.useState)(""),x=Object(i.a)(f,2),g=x[0],v=x[1],w=Object(r.useState)("all"),y=Object(i.a)(w,2),S=y[0],I=y[1],T=Object(r.useState)(!1),D=Object(i.a)(T,2),C=D[0],E=D[1],L=function(e,n,r){var o=e.findIndex((function(e){return e.id===n})),c=e[o],i=Object(s.a)(Object(s.a)({},c),{},Object(a.a)({},r,!c[r]));t.updateItem(O+"items/"+n,i).then((function(){return d([].concat(Object(u.a)(e.slice(0,o)),[i],Object(u.a)(e.slice(o+1))))})).catch((function(){return console.log("Status update error!")}))},P=c.filter((function(t){return t.owner===e})).filter((function(e){return e.label.toLowerCase().indexOf(g.toLowerCase())>-1})).filter((function(e){return"done"===S?!0===e.done:"active"===S?!1===e.done:e})),A=P.filter((function(e){return!0===e.done})).length,J=P.length-A,q=C?Object(l.jsxs)("div",{className:"user-panel d-flex",children:[Object(l.jsxs)("div",{className:"greeting mr-2",children:["Hello, ",e]}),Object(l.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:function(){return E(!1)},children:"Log out"})]}):null,F=C?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{toDo:J,done:A}),Object(l.jsxs)("div",{className:"top-panel d-flex",children:[Object(l.jsx)(b,{value:g,onSearch:function(e){v(e)}}),Object(l.jsx)(h,{filter:S,onSwitch:function(e){I(e)}})]}),Object(l.jsx)(j,{items:P,onDelete:function(e){window.confirm("Are you sure you want to delete this item?")&&t.deleteItem(O+"items/"+e).then((function(){console.log("Item deleted");var t=c.findIndex((function(t){return t.id===e}));d([].concat(Object(u.a)(c.slice(0,t)),Object(u.a)(c.slice(t+1))))})).catch((function(e){return console.log("DELETE error!")}))},onToggleDone:function(e){L(c,e,"done")},onToggleImportant:function(e){L(c,e,"important")}}),Object(l.jsx)(p,{onAdd:function(e){var n=function(e){return{label:e,important:!1,done:!1,id:Math.random(),owner:localStorage.getItem("user")}}(e);t.postItem(O+"items",n).then((function(){return d([].concat(Object(u.a)(c),[n]))})).catch((function(){return console.log("POST error")}))}})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"ToDo List"}),Object(l.jsx)(k,{onLogin:function(e){localStorage.setItem("user",e),E(!0)}}),Object(l.jsxs)("div",{className:"descr mt-2",children:["Please log in. No password required.",Object(l.jsx)("br",{}),"To create a new user just type your username.",Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Please note that our todo items will be available to anyone who logs in with your username"})]})]});return Object(l.jsxs)("div",{className:"todo-app",children:[q,F]})};n(29);c.a.render(Object(l.jsx)(S,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.5d2cfc77.chunk.js.map