(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(11),c=n.n(r),a=n(8),s=n(3),u=n(5),i=n(2),l=(n(19),n(0)),d=function(e){var t=e.value,n=e.onSearch;return Object(l.jsx)("input",{className:"form-control search-input",placeholder:"Search",onChange:function(e){return n(e.target.value)},value:t})},b=n(14),j=(n(21),function(e){var t=e.label,n=e.onDelete,o=e.onToggleDone,r=e.onToggleImportant,c=e.important,a=e.done,s=e.darkmode?"todo-list-item darkmode":"todo-list-item";a&&(s+=" done"),c&&(s+=" important");var u=c?"btn btn-outline-danger btn-sm float-right mr-2 active":"btn btn-outline-danger btn-sm float-right mr-2";return Object(l.jsxs)("div",{className:s,children:[Object(l.jsx)("span",{className:"todo-list-item-label",onClick:o,children:t}),Object(l.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm float-right",onClick:n,children:Object(l.jsx)("i",{className:"fa fa-trash-o"})}),Object(l.jsx)("button",{type:"button",className:u,onClick:r,children:Object(l.jsx)("i",{className:"fa fa-exclamation"})})]})}),f=(n(22),function(e){var t=e.items,n=e.onDelete,o=e.onToggleDone,r=e.onToggleImportant,c=e.darkmode;return Object(l.jsx)("ul",{className:"list-group todo-list",children:t.map((function(e){var t=e.id,a=Object(b.a)(e,["id"]);return Object(l.jsx)("li",{className:c?"list-group-item darkmode":"list-group-item",children:Object(l.jsx)(j,Object(s.a)(Object(s.a)({},a),{},{onDelete:function(){return n(t)},onToggleImportant:function(){return r(t)},onToggleDone:function(){return o(t)},darkmode:c}))},t)}))})}),m=(n(23),function(e){var t=e.toDo,n=e.done;return Object(l.jsxs)("div",{className:"app-header d-flex",children:[Object(l.jsx)("h1",{children:"ToDo List"}),Object(l.jsxs)("h2",{children:[n," done, ",t," pending"]})]})}),h=(n(24),function(e){return Object(l.jsx)("div",{className:"btn-group",children:[{name:"all",label:"All"},{name:"active",label:"Pending"},{name:"done",label:"Done"}].map((function(t){var n=e.filter===t.name?"btn btn-info":"btn btn-outline-secondary";return Object(l.jsx)("button",{type:"button",id:t.name,className:n,onClick:function(t){e.onSwitch(t.target.id)},children:t.label},t.name)}))})}),p=(n(25),function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(t){t.preventDefault(),e.onAdd(r),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(e){c(e.target.value)},placeholder:"What needs to be done?",value:r}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Add item"})]})}),O=(n(26),"https://todo-app-ssmirnova.herokuapp.com/"),x=n(4),g=n.n(x),v=n(7),w=n(12),k=n(13),y=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,[{key:"getItems",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var o,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.id,r=Object(s.a)(Object(s.a)({},n),{},{id:o}),e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(c.status));case 7:return e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t,n){var o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(o.status));case 5:return e.next=7,o.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),N=(n(28),function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(t){t.preventDefault(),e.onLogin(r),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(e){c(e.target.value)},placeholder:"Enter your name",value:r}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Login"})]})}),S=function(){var e=localStorage.getItem("user")||"",t=new y,n=Object(o.useState)([]),r=Object(i.a)(n,2),c=r[0],b=r[1];Object(o.useEffect)((function(){localStorage.clear();var e=!0;return t.getItems(O+"items").then((function(t){e&&b(t)})).catch((function(){return console.log("GET error!")})),function(){return e=!1}}),[]);var j=Object(o.useState)(""),x=Object(i.a)(j,2),g=x[0],v=x[1],w=Object(o.useState)("all"),k=Object(i.a)(w,2),S=k[0],I=k[1],T=Object(o.useState)(!1),D=Object(i.a)(T,2),C=D[0],E=D[1],L=Object(o.useState)(!1),P=Object(i.a)(L,2),A=P[0],F=P[1],J=function(e,n,o){var r=e.findIndex((function(e){return e.id===n})),c=e[r],i=Object(s.a)(Object(s.a)({},c),{},Object(a.a)({},o,!c[o]));t.updateItem(O+"items/"+n,i).then((function(){return b([].concat(Object(u.a)(e.slice(0,r)),[i],Object(u.a)(e.slice(r+1))))})).catch((function(){return console.log("Status update error!")}))},q=c.filter((function(t){return t.owner===e})).filter((function(e){return e.label.toLowerCase().indexOf(g.toLowerCase())>-1})).filter((function(e){return"done"===S?!0===e.done:"active"===S?!1===e.done:e})),B=q.filter((function(e){return!0===e.done})).length,G=q.length-B,H=C?Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"user-panel d-flex",children:[Object(l.jsxs)("div",{className:"greeting mr-2",children:["Hello, ",e]}),Object(l.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:function(){return E(!1)},children:"Log out"})]})}):null,M=C?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{toDo:G,done:B}),Object(l.jsxs)("div",{className:"top-panel d-flex",children:[Object(l.jsx)(d,{value:g,onSearch:function(e){v(e)}}),Object(l.jsx)(h,{filter:S,onSwitch:function(e){I(e)}})]}),Object(l.jsx)(f,{darkmode:A,items:q,onDelete:function(e){window.confirm("Are you sure you want to delete this item?")&&t.deleteItem(O+"items/"+e).then((function(){console.log("Item deleted");var t=c.findIndex((function(t){return t.id===e}));b([].concat(Object(u.a)(c.slice(0,t)),Object(u.a)(c.slice(t+1))))})).catch((function(e){return console.log("DELETE error!")}))},onToggleDone:function(e){J(c,e,"done")},onToggleImportant:function(e){J(c,e,"important")}}),Object(l.jsx)(p,{onAdd:function(e){var n=function(e){return{label:e,important:!1,done:!1,id:Math.random(),owner:localStorage.getItem("user")}}(e);t.postItem(O+"items",n).then((function(){return b([].concat(Object(u.a)(c),[n]))})).catch((function(){return console.log("POST error")}))}})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"ToDo List"}),Object(l.jsx)(N,{onLogin:function(e){localStorage.setItem("user",e),E(!0)}}),Object(l.jsxs)("div",{className:"descr mt-2",children:["Please log in. No password required.",Object(l.jsx)("br",{}),"To create a new user just type your username.",Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Please note that our todo items will be available to anyone who logs in with your username"})]})]});return Object(l.jsxs)("div",{className:A?"todo-app darkmode":"todo-app",children:[H,Object(l.jsxs)("div",{className:"dark-toggle custom-control custom-switch mt-3 mb-2",children:[Object(l.jsx)("label",{className:"custom-control-label",htmlFor:"customSwitch1",children:"Dark mode"}),Object(l.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customSwitch1",value:A,onChange:function(){F(!A)}})]}),M]})};n(29);c.a.render(Object(l.jsx)(S,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.97bf080d.chunk.js.map