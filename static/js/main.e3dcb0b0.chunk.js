(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{28:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(20),s=n.n(r),o=n(5),c=n(10),i=n(11),l=n.n(i),u=n(13),d=n(15),m=n(8),j=(n(28),n(16));n(45),n(30);j.a.initializeApp({apiKey:"AIzaSyDwUxxk_ce9eeG2OCgpHJnXB63LqRarWvk",authDomain:"todo-app-c1a38.firebaseapp.com",databaseURL:"https://todo-app-c1a38-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todo-app-c1a38",storageBucket:"todo-app-c1a38.appspot.com",messagingSenderId:"449895565577",appId:"1:449895565577:web:5c9aad265847e3de21abd8"}),j.a.auth();var b=j.a.firestore(),p=j.a,h=(n(32),n(1)),f=function(e){var t=e.darkmode;return Object(h.jsxs)("div",{className:t?"footer darkmode":"footer",children:[Object(h.jsx)("div",{className:"footer_social_title",children:"Find us on social media:"}),Object(h.jsxs)("div",{className:"footer_social_icons",children:[Object(h.jsx)("a",{href:"https://github.com/ssmirnovacode/ToDo-App",target:"blank",children:Object(h.jsx)("i",{className:"sm-icon fa fa-facebook-square"})}),Object(h.jsx)("a",{href:"https://github.com/ssmirnovacode/ToDo-App",target:"blank",children:Object(h.jsx)("i",{className:"sm-icon fa fa-linkedin-square"})}),Object(h.jsx)("a",{href:"https://github.com/ssmirnovacode/ToDo-App",target:"blank",children:Object(h.jsx)("i",{className:"sm-icon fa fa-github-square"})})]})]})},g=(n(34),function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],s=n[1],o=e.name,c=e.handleLogOut;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"user-panel message mb-2",children:r}),Object(h.jsxs)("div",{className:"user-panel d-flex",children:[Object(h.jsxs)("div",{className:"greeting mr-2",children:["Hello, ",o||"Guest"]}),Object(h.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:function(){if(s(""),"pMzXQLXTikecjjABwy3vAnyipGC3"!==p.auth().currentUser.uid){var e=prompt("Enter new email. You will have to sign in again with the email indicated.");e&&p.auth().currentUser.updateEmail(e).then((function(){return p.auth().signOut()})).catch((function(e){return console.error(e.message)}))}else s("Guest users are not allowed to change email")},children:"Update email"}),Object(h.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:function(){if(s(""),"pMzXQLXTikecjjABwy3vAnyipGC3"!==p.auth().currentUser.uid){var e=prompt("Enter new password. You will have to sign in again with new password.");e&&p.auth().currentUser.updatePassword(e).then((function(){return p.auth().signOut()})).catch((function(e){return s(e.message)}))}else s("Guest users are not allowed to change password")},children:"Update password"}),Object(h.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:c,children:"Log out"})]})]})}),O=(n(35),n(36),function(e){var t=e.toDo,n=e.done;return Object(h.jsxs)("div",{className:"app-header d-flex",children:[Object(h.jsx)("h1",{children:"ToDo List"}),Object(h.jsxs)("h2",{children:[n," done, ",t," pending"]})]})}),x=(n(37),function(e){var t=e.value,n=e.onSearch;return Object(h.jsx)("input",{className:"form-control search-input",placeholder:"Search",onChange:function(e){return n(e.target.value)},value:t})}),v=function(e){return Object(h.jsx)("div",{className:"btn-group",children:[{name:"all",label:"All"},{name:"active",label:"Pending"},{name:"done",label:"Done"}].map((function(t){var n=e.filter===t.name?"btn btn-info":"btn btn-outline-secondary";return Object(h.jsx)("button",{type:"button",id:t.name,className:n,onClick:function(t){e.onSwitch(t.target.id)},children:t.label},t.name)}))})},w=n(22),N=(n(38),function(e){var t=e.label,n=e.onDelete,a=e.onToggleDone,r=e.onToggleImportant,s=e.important,o=e.done,c=e.darkmode,i=c?"todo-list-item darkmode":"todo-list-item";o&&(i+=" done"),s&&(i+=" important");var l=s?"btn btn-outline-danger btn-sm float-right mr-2 active":"btn btn-outline-danger btn-sm float-right mr-2";return Object(h.jsxs)("div",{className:i,"data-todoitem":!0,children:[Object(h.jsx)("div",{className:"todo-list-item-label",onClick:a,children:t}),Object(h.jsxs)("div",{className:"todo-btn-group",children:[Object(h.jsx)("button",{type:"button",className:c?l+" darkmode":l,onClick:r,children:Object(h.jsx)("i",{className:"fa fa-exclamation"})}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm float-right",onClick:n,children:Object(h.jsx)("i",{className:"fa fa-trash-o"})})]})]})}),y=(n(39),function(e){var t=e.items,n=e.onDelete,a=e.onToggleDone,r=e.onToggleImportant,s=e.darkmode;return Object(h.jsx)("ul",{className:"list-group todo-list",children:t.map((function(e){var t=e.id,c=Object(w.a)(e,["id"]);return Object(h.jsx)("li",{className:s?"list-group-item darkmode":"list-group-item",children:Object(h.jsx)(N,Object(o.a)(Object(o.a)({},c),{},{onDelete:function(){return n(t)},onToggleImportant:function(){return r(t)},onToggleDone:function(){return a(t)},darkmode:s}))},t)}))})}),k=(n(40),function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],s=n[1];return Object(h.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(t){t.preventDefault(),e.onAdd(r),s("")},children:[Object(h.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(e){s(e.target.value)},placeholder:"What needs to be done?",value:r}),Object(h.jsx)("button",{className:"btn btn-outline-secondary",children:"Add item"})]})}),S=(n(41),{isResetEmailSent:!1,loginError:"",user:{email:"",password:""}}),I=function(e){var t=Object(a.useState)(S),n=Object(m.a)(t,2),r=n[0],s=n[1],i=function(e){s((function(t){return Object(o.a)(Object(o.a)({},t),{},{user:Object(o.a)(Object(o.a)({},t.user),{},Object(c.a)({},e.target.name,e.target.value))})}))};return Object(h.jsxs)("form",{className:"login-form d-flex",onSubmit:function(e){e.preventDefault(),p.auth().signInWithEmailAndPassword(r.user.email,r.user.password).then((function(){s(S)})).catch((function(e){return s((function(t){return Object(o.a)(Object(o.a)({},t),{},{loginError:e.message})}))}))},children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(h.jsx)("input",{required:!0,type:"email",className:"form-control",name:"email",onChange:i,placeholder:"Enter your email",value:r.email}),Object(h.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(h.jsx)("input",{required:!0,type:"password",className:"form-control",name:"password",onChange:i,placeholder:"Enter your password",value:r.password}),r.loginError?Object(h.jsx)("div",{className:"err-message",children:r.loginError}):null,r.isResetEmailSent?Object(h.jsxs)("span",{className:"login-span email-sent",children:["Password reset instructions have been sent to ",Object(h.jsx)("span",{className:"login-span",children:r.user.email})]}):Object(h.jsx)("span",{className:"login-span",onClick:function(){p.auth().sendPasswordResetEmail(r.user.email).then((function(){return s((function(e){return Object(o.a)(Object(o.a)({},e),{},{isResetEmailSent:!0})}))})).catch((function(e){return s((function(t){return Object(o.a)(Object(o.a)({},t),{},{loginError:e.message})}))}))},children:"Forgot your password?"}),Object(h.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Login"})]})},C=(n(42),{username:"",email:"",password:"",password2:""}),E=function(e){var t=Object(a.useState)(C),n=Object(m.a)(t,2),r=n[0],s=n[1],i=function(e){s(Object(o.a)(Object(o.a)({},r),{},Object(c.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("form",{className:"register-form d-flex",onSubmit:function(t){var n;(t.preventDefault(),r.password===r.password2)&&(n=r,p.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(){return p.auth().currentUser.updateProfile({displayName:n.username,photoURL:null})})).then((function(){return p.auth().currentUser.sendEmailVerification().then((function(){return console.log("Email sent")}))})).then((function(){return e.onRegister()})).catch((function(e){return console.error(e.message)})),s(C))},children:[Object(h.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(h.jsx)("input",{required:!0,type:"text",className:"form-control",name:"username",onChange:i,placeholder:"Enter your name",value:r.username}),Object(h.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(h.jsx)("input",{required:!0,type:"email",className:"form-control",name:"email",onChange:i,placeholder:"Enter your email",value:r.email}),Object(h.jsx)("label",{htmlFor:"pass",children:"Password: "}),Object(h.jsx)("input",{required:!0,type:"password",className:"form-control",name:"password",onChange:i,placeholder:"Enter your password",value:r.password}),Object(h.jsx)("label",{htmlFor:"pass-2",children:"Repeat password: "}),Object(h.jsx)("input",{required:!0,type:"password",className:"form-control",name:"password2",onChange:i,placeholder:"Repeat your password",value:r.password2}),r.password===r.password2?null:Object(h.jsx)("div",{className:"err-message",children:"Passwords don\xb4t match!!"}),Object(h.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Sign up"})]})},D=function(e){var t=e.loggedIn,n=e.pendingCount,a=e.doneCount,r=e.pattern,s=e.searchItems,o=e.filter,c=e.onSwitchFilter,i=e.dark,l=e.visibleItems,u=e.deleteItem,d=e.toggleDone,m=e.toggleImportant,j=e.addItem,b=e.signInType,p=e.setSignInType,f=e.guestUserSignIn;return Object(h.jsx)(h.Fragment,{children:t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{toDo:n,done:a}),Object(h.jsxs)("div",{className:"top-panel d-flex",children:[Object(h.jsx)(x,{value:r,onSearch:s}),Object(h.jsx)(v,{filter:o,onSwitch:c})]}),Object(h.jsx)(y,{darkmode:i,items:l,onDelete:u,onToggleDone:d,onToggleImportant:m}),Object(h.jsx)(k,{onAdd:j})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"ToDo List"}),"login"===b?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"descr mt-2",children:["If you are not registered yet, you can sign up ",Object(h.jsx)("span",{className:"login-span",onClick:function(){return p("register")},children:"here"})]}),Object(h.jsxs)("div",{className:"descr mt-2",children:["You can also sign-in as a ",Object(h.jsx)("span",{className:"login-span",onClick:f,children:"guest "}),"(your data will be public)"]})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(E,{onRegister:function(){return p("login")}}),Object(h.jsxs)("div",{className:"descr mt-2",children:["Already registered? Please  ",Object(h.jsx)("span",{className:"login-span",onClick:function(){return p("login")},children:"log in"})]}),Object(h.jsxs)("div",{className:"descr mt-2",children:["The app rules allow you sign up with an imaginary email (for example, test@test.com).",Object(h.jsx)("span",{className:"warning-span",children:" Please note that you won\xb4t be able to reset your password by email in that case"})]})]})]})})},T=function(){var e=p.auth().currentUser||null,t=Object(a.useState)([]),n=Object(m.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),j=Object(m.a)(i,2),O=j[0],x=j[1],v=Object(a.useState)("all"),w=Object(m.a)(v,2),N=w[0],y=w[1],k=Object(a.useState)(!1),S=Object(m.a)(k,2),I=S[0],C=S[1],E=Object(a.useState)(!1),T=Object(m.a)(E,2),A=T[0],F=T[1],U=Object(a.useState)("login"),L=Object(m.a)(U,2),P=L[0],q=L[1];Object(a.useEffect)((function(){b.collection("items").get().then((function(e){var t=function(e){var t=[];return e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),t}(e);s(t)})).catch((function(e){return console.error(e.message)}))}),[]),p.auth().onAuthStateChanged((function(t){t&&"login"===P?(e=p.auth().currentUser,C(!0)):C(!1)}));var R=function(t){return{label:t,important:!1,done:!1,owner:e.uid,id:(1e8*Math.random()).toString()}},G=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(t),e.next=3,b.collection("items").doc(n.id).set(n);case 3:s((function(e){return[].concat(Object(u.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this item?")){e.next=6;break}return e.next=3,b.doc("items/".concat(t)).delete();case 3:n=r.findIndex((function(e){return e.id===t})),a=[].concat(Object(u.a)(r.slice(0,n)),Object(u.a)(r.slice(n+1))),s(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){var i,d,m,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.find((function(e){return e.id===n})),e.next=3,b.doc("items/".concat(n)).update(Object(c.a)({},a,!i[a]),(function(e){throw new Error(e)}));case 3:d=t.findIndex((function(e){return e.id===n})),m=Object(o.a)(Object(o.a)({},r[d]),{},Object(c.a)({},a,!i[a])),j=[].concat(Object(u.a)(r.slice(0,d)),[m],Object(u.a)(r.slice(d+1))),s(j);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.auth().signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=r&&r.filter((function(t){return e&&t.owner===e.uid})).filter((function(e){return e.label.toLowerCase().indexOf(O.toLowerCase())>-1})).filter((function(e){return"done"===N?!0===e.done:"active"===N?!1===e.done:e})),z=r.filter((function(t){return t.owner===e})),J=z.filter((function(e){return!0===e.done})).length,M={loggedIn:I,pendingCount:z.length-J,doneCount:J,pattern:O,searchItems:function(e){x(e)},filter:N,onSwitchFilter:function(e){y(e)},dark:A,visibleItems:_,deleteItem:B,toggleDone:function(e){W(r,e,"done")},toggleImportant:function(e){W(r,e,"important")},addItem:G,signInType:P,setSignInType:q,guestUserSignIn:function(){p.auth().signInWithEmailAndPassword("guest@test.com","test123").then((function(){C(!0),console.log(e)})).catch((function(e){return console.error(e.message)}))}};return Object(h.jsxs)("div",{className:A?"todo-app darkmode":"todo-app",children:[I&&Object(h.jsx)(g,{name:e.displayName,handleLogOut:X}),Object(h.jsxs)("div",{className:"dark-toggle custom-control custom-switch mt-3 mb-2",children:[Object(h.jsx)("label",{className:"custom-control-label",htmlFor:"customSwitch1",children:"Dark mode"}),Object(h.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customSwitch1",value:A,onChange:function(){F(!A)}})]}),Object(h.jsx)(D,Object(o.a)({},M)),Object(h.jsx)(f,{darkmode:A})]})};n(43);s.a.render(Object(h.jsx)(T,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e3dcb0b0.chunk.js.map