(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{19:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},28:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n(11),c=n.n(r),a=n(8),s=n(2),u=n(5),i=n(3),l=(n(19),n(0)),f=function(t){var e=t.value,n=t.onSearch;return Object(l.jsx)("input",{className:"form-control search-input",placeholder:"Search",onChange:function(t){return n(t.target.value)},value:e})},d=n(14),b=(n(21),function(t){var e=t.label,n=t.onDelete,o=t.onToggleDone,r=t.onToggleImportant,c=t.important,a="todo-list-item";t.done&&(a+=" done"),c&&(a+=" important");var s=c?"btn btn-outline-danger btn-sm float-right mr-2 active":"btn btn-outline-danger btn-sm float-right mr-2";return Object(l.jsxs)("span",{className:a,children:[Object(l.jsx)("span",{className:"todo-list-item-label",onClick:o,children:e}),Object(l.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm float-right",onClick:n,children:Object(l.jsx)("i",{className:"fa fa-trash-o"})}),Object(l.jsx)("button",{type:"button",className:s,onClick:r,children:Object(l.jsx)("i",{className:"fa fa-exclamation"})})]})}),j=(n(22),function(t){var e=t.items,n=t.onDelete,o=t.onToggleDone,r=t.onToggleImportant;return Object(l.jsx)("ul",{className:"list-group todo-list",children:e.map((function(t){var e=t.id,c=Object(d.a)(t,["id"]);return Object(l.jsx)("li",{className:"list-group-item",children:Object(l.jsx)(b,Object(s.a)(Object(s.a)({},c),{},{onDelete:function(){return n(e)},onToggleImportant:function(){return r(e)},onToggleDone:function(){return o(e)}}))},e)}))})}),m=(n(23),function(t){var e=t.toDo,n=t.done;return Object(l.jsxs)("div",{className:"app-header d-flex",children:[Object(l.jsx)("h1",{children:"ToDo List"}),Object(l.jsxs)("h2",{children:[n," done, ",e," pending"]})]})}),h=(n(24),function(t){return Object(l.jsx)("div",{className:"btn-group",children:[{name:"all",label:"All"},{name:"active",label:"Pending"},{name:"done",label:"Done"}].map((function(e){var n=t.filter===e.name?"btn btn-info":"btn btn-outline-secondary";return Object(l.jsx)("button",{type:"button",id:e.name,className:n,onClick:function(e){t.onSwitch(e.target.id)},children:e.label},e.name)}))})}),p=(n(25),function(t){var e=Object(o.useState)(""),n=Object(i.a)(e,2),r=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(e){e.preventDefault(),t.onAdd(r),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(t){c(t.target.value)},placeholder:"What needs to be done?",value:r}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Add item"})]})}),O=(n(26),"https://my-json-server.typicode.com/ssmirnovacode/db.json-todo-app/"),x=n(4),g=n.n(x),v=n(7),y=n(12),w=n(13),N=function(){function t(){Object(y.a)(this,t)}return Object(w.a)(t,[{key:"getItems",value:function(){var t=Object(v.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(n.status));case 5:return t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"postItem",value:function(){var t=Object(v.a)(g.a.mark((function t(e,n){var o,r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.id,r=Object(s.a)(Object(s.a)({},n),{},{id:o}),t.next=4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 4:if((c=t.sent).ok){t.next=7;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(c.status));case 7:return t.next=9,c.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateItem",value:function(){var t=Object(v.a)(g.a.mark((function t(e,n){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:if((o=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(o.status));case 5:return t.next=7,o.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var t=Object(v.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"DELETE"});case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(n.status));case 5:return t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),k=(n(28),function(t){var e=Object(o.useState)(""),n=Object(i.a)(e,2),r=n[0],c=n[1];return Object(l.jsxs)("form",{className:"item-add-form d-flex",onSubmit:function(e){e.preventDefault(),t.onLogin(r),c("")},children:[Object(l.jsx)("input",{required:!0,type:"text",className:"form-control",onChange:function(t){c(t.target.value)},placeholder:"Enter your name",value:r}),Object(l.jsx)("button",{className:"btn btn-outline-secondary",children:"Login"})]})}),S=function(){var t=localStorage.getItem("user")||"",e=new N,n=Object(o.useState)([]),r=Object(i.a)(n,2),c=r[0],d=r[1];Object(o.useEffect)((function(){localStorage.clear();var t=!0;return e.getItems(O+"items").then((function(e){t&&d(e)})).catch((function(){return console.log("GET error!")})),function(){return t=!1}}),[]);var b=Object(o.useState)(""),x=Object(i.a)(b,2),g=x[0],v=x[1],y=Object(o.useState)("all"),w=Object(i.a)(y,2),S=w[0],I=w[1],T=Object(o.useState)(!1),C=Object(i.a)(T,2),D=C[0],E=C[1],L=function(t,n,o){var r=t.findIndex((function(t){return t.id===n})),c=t[r],i=Object(s.a)(Object(s.a)({},c),{},Object(a.a)({},o,!c[o]));e.updateItem(O+"items/"+n,i).then((function(){return d([].concat(Object(u.a)(t.slice(0,r)),[i],Object(u.a)(t.slice(r+1))))})).catch((function(){return console.log("Status update error!")}))},A=c.filter((function(e){return e.owner===t})).filter((function(t){return t.label.toLowerCase().indexOf(g.toLowerCase())>-1})).filter((function(t){return"done"===S?!0===t.done:"active"===S?!1===t.done:t})),P=A.filter((function(t){return!0===t.done})).length,J=A.length-P,q=D?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{toDo:J,done:P}),Object(l.jsxs)("div",{className:"top-panel d-flex",children:[Object(l.jsx)(f,{value:g,onSearch:function(t){v(t)}}),Object(l.jsx)(h,{filter:S,onSwitch:function(t){I(t)}})]}),Object(l.jsx)(j,{items:A,onDelete:function(t){window.confirm("Are you sure you want to delete this item?")&&e.deleteItem(O+"items/"+t).then((function(){console.log("Item deleted");var e=c.findIndex((function(e){return e.id===t}));d([].concat(Object(u.a)(c.slice(0,e)),Object(u.a)(c.slice(e+1))))})).catch((function(t){return console.log("DELETE error!")}))},onToggleDone:function(t){L(c,t,"done")},onToggleImportant:function(t){L(c,t,"important")}}),Object(l.jsx)(p,{onAdd:function(t){var n=function(t){return{label:t,important:!1,done:!1,id:Math.random(),owner:localStorage.getItem("user")}}(t);e.postItem(O+"items",n).then((function(){return d([].concat(Object(u.a)(c),[n]))})).catch((function(){return console.log("POST error")}))}})]}):Object(l.jsx)("div",{className:"mt-2",children:"Please log in"}),B=D?Object(l.jsxs)("div",{className:"user-panel d-flex",children:[Object(l.jsxs)("div",{className:"greeting mr-2",children:["Hello, ",t]}),Object(l.jsx)("button",{className:"btn btn-outline-secondary logout",onClick:function(){return E(!1)},children:"Log out"})]}):Object(l.jsx)(k,{onLogin:function(t){localStorage.setItem("user",t),E(!0)}});return Object(l.jsxs)("div",{className:"todo-app",children:[B,q]})};n(29);c.a.render(Object(l.jsx)(S,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.f97c5138.chunk.js.map